                           Testing Procedure for New BMUs
                           ==============================


0) Prepare the power supply with between 3.40 V and 3.48 V and the current
   limit set to about 3 A.
   Have a multimeter on 10 A range monitoring current. 
   Set oscilloscope to 1 V/div, 100 us/div, normal trigger, trigger at about 1.7 V.
1) Place the board to be tested with its beepers down and with the 
   "DANGER HIGH VOLTAGE" text reading correctly.
   Connect the communications plugs (in and out) to the rightmost two pins of 
   the 3 pin headers.
   Connect power to all Battery Monitoring Units (BMUs) with the alligator clips. 
   Wait for the current to fall to less than 0.010 A. No LEDs should light.
2) Unplug the red voltmeter probe from the white socket, and for each BMU, 
   use it to check the voltage at JTAG+ (the rightmost hole of the group of 4). 
   They should all read between 2.47 and 2.53 V.
3) Use the netbook's taskbar (bottom of screen) to choose the icon that looks 
   like a spanner and screwdriver (IAR Workbench).
   Use the "Launchpad" programming device to program each BMU in turn, 
   by inserting its 4 pin plug part way into the group of 4 holes on the BMU
   and tilting it and applying some pressure. In IAR Workbench type <Alt+p>wd 
   (or choose menu "Project/Download/Download active program").
   Wait for it to "ting" before moving to the next BMU.
4) Use the netbook's taskbar (bottom of screen) to choose the icon that looks like 
   a computer with a "T" on its screen (TeraTerm). Press the orange oscilloscope probe
   against the northwest pin of the black chip (OP1) in the southeast corner of each BMU. 
   Hold down the <Shift>+U keys to send auto-repeated U characters and observe 
   approximate square waves with some rounded corners. 
   The first BMU will be closer to 50/50 hi/lo as it is not being driven by a previous BMU. 
   Apart from that, they should all look the same.
5) Type i<Enter><Ctrl+a> to set the IDs. 
   Type 0'lwu (zero tick L) to turn on link voltage measurement for all BMUs.
6) Type v<Enter> command to check that the last ID is correct, and that all blue LEDs
   are working.
7) For each BMU:
  a) Type <n>x<enter> where <n> is the number of the BMU, to address the BMU on its own.
  b) Use the v command to verify that only the current BMU's blue light comes on.
     If not, escape enter and re-do the x command.
  c) Use the <nnnn>'vc command to calibrate the voltage. Check that the calibration
     value is in the ranges -31500 to -32768 or 31500 to 32767. Check the voltage
     reading with 'v'.
  d) Use the <nn>'tc command to calibrate the temperature. Check with 't'.
  e) Use the l command to read link voltage; it should read 1500 +- 100. You may
     need 0p.
  f) Short the LI (Link In) pin to ground and run another l command. Then remove pin.
     It should read -500 +- 100.
  g) Use 1y to turn on bypass. Current should go to 0.37-0.41 A, yellow LED should
     light.
  h) Use 0y1e to turn on error. Red LED should light, beeper should sound.
  i) Put a DSO lead (using Measure mode) or a frequency meter lead on the active 
     beeper pin to find the beeper 
     frequency. Use the 'o' for 'octave' command, repeated as necessary, to place 
     the beeper frequency in one of two ranges: 1.15 to 1.4 kHz or 2.8 to 4.6 kHz. 
     
  j) Use 0eu<enter> to turn off the error alarm and update the calibration values.
     The u is very important otherwise all the above work will be lost.
     Ignore the strange characters emitted as following BMUs are reset as a result 
     of the u command.
  k) Type the <ESC> key (upper left corner of keyboard). 
     This cancels the previous <n>x command.

8) Test break-to-reset with 1e then <Alt-b> (send break). All red LEDs should go off.
9) Test for false break-to-reset with 1Q1e<Enter> then use TeraTerm's Send File command
   in binary mode and with no delays between characters, to send the file 
   "PCB/NullsTest.txt". All red LEDs should stay on.
10) Turn off the power supply.
